#!/usr/bin/env python
from sys import argv, exit
from a4 import A4ReaderStream
from a4.messages import *

if len(argv) == 1 or len(argv) > 3:
    print "Usage: %s <file> [<index>]" % argv[0]
    exit(-1)

fn = argv[1]
index = 1
if len(argv) == 3:
    index = int(argv[2])

r = A4ReaderStream(open(fn))
r.register(Event)
r.register(EventStreamInfo)
print("%s: %s" % (fn, r.info()))
print("Object at index %i:" % (index))
print("--------------------")

for i in range(index):
    obj = r.read()
print obj


